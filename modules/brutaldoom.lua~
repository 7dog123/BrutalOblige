BRUTALDOOM = { }

BRUTALITY = { }

BRUTALDOOM.MONSTERS =
{
	Belphegor =
	  {
	    id = 302
	    r = 32
	    h = 88
	    level = 9
	    prob = 17
	    crazy_prob = 12
	    health = 2000
	    damage = 150
	    attack = "missile"
	    outdoor_factor = 3.0
	    density = 0.1
	    weap_prefs = { bfg=5.0 }
	    room_size = "large"
	  }
	 Juggernaut =
	  {
	    id = 303
	    r = 48
	    h = 88
	    level = 9
	    prob = 17
	    crazy_prob = 12
	    health = 8000
	    damage = 200
	    attack = "hitscan"
	    outdoor_factor = 3.0
	    density = 0.1
	    weap_prefs = { bfg=5.0 }
	    room_size = "large"
	  }
	  Flemoid1 =
	  {
	    id = 304
	    r = 20
	    h = 56 
	    level = 1
	    prob = 35
	    crazy_prob = 35
	    health = 70
	    damage = 1
	    attack = "Missile"
	    density = 1.5
	    room_size = "small"
	    infights = true
	    theme = "satanshankerchief"
	  }
	  Flemoid2 =
	  {
	    id = 305
	    r = 20
	    h = 56 
	    level = 2
	    prob = 35
	    crazy_prob = 35
	    health = 90
	    damage = 1
	    attack = "Missile"
	    density = 1.5
	    room_size = "small"
	    infights = true
	    theme = "satanshankerchief"
	  }
	  Flemoid3 =
	  {
	    id = 306
	    r = 20
	    h = 56 
	    level = 3
	    prob = 35
	    crazy_prob = 35
	    health = 200
	    damage = 1
	    attack = "Missile"
	    density = 1.5
	    room_size = "small"
	    infights = true
	    theme = "satanshankerchief"
	  }
	  Quadrumpus =
	  {
	    id = 310
	    r = 20
	    h = 64 
	    level = 7
	    prob = 20
	    crazy_prob = 20
	    health = 400
	    damage = 1
	    attack = "Missile"
	    density = 0.7
	    room_size = "medium"
	    infights = true
	    theme = "satanshankerchief"
	  }
	--As of v20b the evil marine replaces the ss. A script checks if it is in a wolfenstein themed level and changes it back if so.
	ss_dude = REMOVE_ME
	EvilMarine =
	  {
	    id = 84
	    r = 20 --the evil marine is actually 14 but I've left it as 20 incase it is an ss guard.
	    h = 56 
	    level = 8
	    prob = 25
	    crazy_prob = 7
	    health = 200
	    damage = 75
	    attack = "hitscan"
	    cage_factor = 0  -- never put in cages
	    density = 1.0
	  }
	BrutalSS = --the script often fails in Oblige levels hence this as well
	  {
	    id = 311
	    r = 20
	    h = 56 
	    level = 1
	    prob = 35
	    crazy_prob = 20
	    health = 90
	    damage = 20
	    attack = "hitscan"
	    cage_factor = 0  -- never put in cages
	    density = 1.5
	    theme = "wolf"
	  }
	  EasyMarine =
	  {
	    id = 307
	    r = 14
	    h = 56 
	    level = 3
	    prob = 20
	    crazy_prob = 7
	    health = 80
	    damage = 5
	    attack = "hitscan"
	    cage_factor = 0  -- never put in cages
	    density = 1.0
	  }
	  DarkImp =
	  {
	    id = 308
	    r = 25
	    h = 56 
	    level = 1
	    prob = 65
	    health = 120
	    damage = 3
	    attack = "missile"
	    room_size = "small"
	  }
	  Epic2Alien =
	  {
	    id = 309
	    r = 20
	    h = 56 
	    level = 4
	    prob = 15
	    crazy_prob = 7
	    health = 80
	    damage = 20
	    attack = "hitscan"
	    cage_factor = 0  -- never put in cages
	    density = 1.0
	  }
}

BRUTALITY.MONSTERS =
{
	--remove the no longer needed brutal monsters
	Belphegor = REMOVE_ME
	DarkImp = REMOVE_ME
	Juggernaut = REMOVE_ME

	  Trite =
	  {
	    id = 303
	    r = 19
	    h = 23 
	    level = 1
	    prob = 65
	    crazyprob = 20
	    health = 15
	    damage = 1
	    attack = "melee"
	    room_size = "small"
	  }

	--from pb's decorate.realm667monsters
	  Shadow =
	  {
	    id = 312
	    r = 20
	    h = 56 
	    level = 2
	    prob = 50
	    crazyprob = 20
	    health = 80
	    damage = 5
	    attack = "missile"
	    room_size = "small"
	  }
	
}

--decorate definition
function BRUTALDOOM.decorate()

  local data =
	{
		'actor ObligeBelphegor : Belphegor 302\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeJuggernaut : Hectebus 303\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeFlemoid1 : Flemoid1 304\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeFlemoid2 : Flemoid2 305\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeFlemoid3 : Flemoid3 306\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeEasyMarine : EasyMarine 307\n'
		'{\n'
		'}\n'
		'\n'
		'ACTOR ObligeDarkImp : DoomImp 308\n' --change back to inherit from Imp if you can be bothered with the brutal stuff
		'{\n'
		'Translation "48:63=5:8", "64:79=5:8", "208:223=5:8"\n' --for the brutal death states
		'Obituary "%o was burned by a dark imp."\n'
  		'HitObituary "%o was slashed by a dark imp."\n'
  		'Health 120\n'
		'States\n'
		  '{\n'
		  'Spawn:\n'
		    'DRKS AB 10 A_Look\n'
		    'Loop\n'
		  'See:\n'
		    'DRKS AABBCCDD 3 A_Chase\n'
		    'Loop\n'
		  'Melee:\n'
		  'Missile:\n'
		    'DRKS EF 8 A_FaceTarget\n'
		    'DRKS G 6 A_CustomComboAttack("CacodemonBall", 32, 3 * random(1, 8), "imp/melee")\n' --close enough
		    'Goto See\n'
		  'Pain:\n'
		    'DRKS H 2\n'
		    'DRKS H 2 A_Pain\n'
		    'Goto See\n'
		  'Death:\n'
		    'TNT1 A 0 A_Jump (127, "Death2")\n'
		    'DRKS I 8\n'
		    'DRKS J 8 A_Scream\n'
		    'DRKS K 6\n'
		    'DRKS L 6 A_NoBlocking\n'
		    'DRKS M -1\n'
		    'Stop\n'
		  'Death2:\n'
		    'DRKD A 8\n'
		    'DRKD C 7 A_Scream\n'
		    'DRKD D 5\n'
		    'DRKD E 5 A_NoBlocking\n'
		    'DRKD E -1\n'
		    'Stop\n'
		'Death.MonsterShotgunBullet:\n'
		'Death.Shotgun:\n'
		 	'TNT1 A 0 A_ChangeFlag("SLIDESONWALLS", 0)\n'
			'TNT1 A 0 A_Jump(42, "Death.Shotgunontheface")\n'
			'TNT1 A 0 A_JumpIfCloser(80, "Death.Blast")\n'
			'TNT1 A 0 A_JumpIfCloser(320, "Death.Shotgunontheface")\n'
			'Goto Death\n'
		'Death.SSG:\n'
		 	'TNT1 A 0 A_ChangeFlag("SLIDESONWALLS", 0)\n'
			'TNT1 A 0 A_Jump(42, "Death.Shotgunontheface")\n'
			'TNT1 A 0 A_JumpIfCloser(80, "XDeath")\n'
			'TNT1 A 0 A_JumpIfCloser(320, "Death.Shotgunontheface")\n'
			'Goto Death\n'
		'Death.Shotgunontheface:\n'
			'TNT1 A 0 A_Stop\n'
			'TNT1 A 0 A_Pain\n'
			'TROO H 1 A_FaceTarget\n'
			'TNT1 A 0 A_Recoil(13)\n'
			'TNT1 A 0 ThrustThingZ(0,20,0,1)\n'
			'TNT1 A 0 A_Scream\n'
			'TNT1 A 0 A_CustomMissile ("MuchBlood2", 35, 0, random (0, 360), 2, random (0, 160))\n'
			'TNT1 AA 0 A_CustomMissile ("XDeath1", 35, 0, random (0, 360), 2, random (0, 160))\n'
			'TR06 ABCDE 4 A_CustomMissile ("Brutal_LiquidBlood3", 15, 0, random (0, 360), 2, random (0, 40))\n'
			'TR06 FGHIJK 4 A_NoBlocking\n'
		    	'TR06 K -1\n'
		    	'Stop\n'
		'Death.Blast:\n'
		'Death.Railgun:\n'
			'TNT1 A 0\n'
			'TNT1 A 0 A_FaceTarget\n'
			'TNT1 A 0 A_NoBlocking\n'
			'TNT1 A 0 A_XScream\n'
			'TNT1 AAA 0 A_CustomMissile ("Instestin", 32, 0, random (150, 210), 2, random (0, 40))\n'
			'TNT1 AAA 0 A_CustomMissile ("XDeath1", 32, 0, random (150, 210), 2, random (0, 40))\n'
			'TNT1 A 0 A_CustomMissile ("XDeathDarkImpArm", 32, 0, random (150, 210), 2, random (0, 40))\n'
			'TNT1 A 0 A_CustomMissile ("XDeathDarkImpHead", 32, 0, random (150, 210), 2, random (0, 40))\n'
			'TNT1 AAA 0 A_CustomMissile ("Xdeath3", 16, 0, random (170, 190), 2, random (0, 40))\n'
			'TNT1 AAAA 0 A_CustomMissile ("Brutal_FlyingBlood", 32, 0, random (170, 190), 2, random (0, 40))\n'
			'TNT1 AAAA 0 A_CustomMissile ("Brutal_FlyingBloodFaster", 32, 0, random (170, 190), 2, random (0, 40))\n'
			'TNT1 AAAA 0 A_CustomMissile ("Brutal_FlyingBloodMuchFaster", 32, 0, random (170, 190), 2, random (0, 40))\n'
			'TNT1 AAAA 0 A_CustomMissile ("SuperWallRedBlood", 32, 0, random (170, 190), 2, random (0, 40))\n'
			'TNT1 AAA 0 A_CustomMissile ("BloodMistBig", 40, 0, random (0, 360), 2, random (30, 90))\n'
			'TRO3 A 6 A_Stop\n'
			'TNT1 A 0 A_SpawnItem ("GrowingBloodPool")\n'
			'TRO3 BBBBBBBBBB 3 A_CustomMissile ("Brutal_LiquidBlood2", 26, 0, random (0, 360), 2, random (30, 60))\n'
			'TRO3 CCC 3 A_CustomMissile ("Brutal_LiquidBlood2", 26, 0, random (0, 360), 2, random (10, 40))\n'
			'TRO3 DD 3 A_CustomMissile ("Brutal_LiquidBlood2", 6, 0, random (0, 360), 2, random (30, 60))\n'
			'TRO3 E -1\n'
		    'Stop\n'
		  'Raise:\n'
		    'DRKS MLKJI 8\n'
		    'Goto See\n'
		  '}\n'
		'}\n'
		'ACTOR XDeathDarkImpArm : XDeathImpArm\n'
		'{\n'
		'Translation "48:63=5:8", "64:79=5:8", "208:223=5:8"\n'
		'}\n'
		'ACTOR XDeathDarkImpHead : XDeathImpHead\n'
		'{\n'
		'Translation "48:63=5:8", "64:79=5:8", "208:223=5:8"\n'
		'}\n'
		'actor ObligeEpic2Alien : Epic2Alien 309\n'
		'{\n'
			'SeeSound "chainguy/sight"\n'
			'PainSound "chainguy/pain"\n'
			'DeathSound "chainguy/death"\n'
			'ActiveSound "chainguy/active"\n'
			'AttackSound "chainguy/attack"\n'
			'Obituary "%o never saw their attacker"\n'
			'States\n'
			'{\n'
				'See:\n'
					'TNT1 A 0 A_ChangeFlag("SHOOTABLE", 0)\n'
					'TNT1 AAAAAAAAAAAAAAAAAAA 1 A_Chase("","")\n'
					'TNT1 A 0 A_ChangeFlag("SHOOTABLE", 1)\n'
					'EPTA ABCD 1 A_Chase\n'
					'TNT1 A 0 A_ChangeFlag("SHOOTABLE", 0)\n'
					'TNT1 AAAAAAAAAAAAAAAAAAA 1 A_Chase("","")\n'
					'TNT1 A 0 A_ChangeFlag("SHOOTABLE", 1)\n'
					'EPTA ABCD 1 A_Chase\n'
					'EPTA ABCD 1 A_Chase("","")\n'
					'TNT1 AAAAAAAAAAAAAAAAAAA 1 A_Chase("","")\n'
					'EPTA ABCDABCD 1 A_Chase\n'
					'Loop\n'
				'Missile:\n'
					'EPTA E 9 A_FaceTarget\n'
					'EPTA F 4 A_FaceTarget\n'
					'EPTA G 4 BRIGHT A_CPosAttack\n'
					'EPTA E 9 A_FaceTarget\n'
					'EPTA F 4 A_FaceTarget\n'
					'EPTA G 4 BRIGHT A_CPosAttack\n'
					'EPTA E 9 A_FaceTarget\n'
					'EPTA F 4 A_FaceTarget\n'
					'EPTA G 4 BRIGHT A_CPosAttack\n'
					'EPTA E 9 A_FaceTarget\n'
					'EPTA F 4 A_FaceTarget\n'
					'EPTA G 4 BRIGHT A_CPosAttack\n'
					'Goto See\n'
				'Pain:\n'
					'EPTA H 3 A_Pain\n'
					'Goto See\n'
				'Death:\n'
					'EPTA I 5\n'
					'EPTA J 5 A_Scream\n'
					'EPTA K 5 A_NoBlocking\n'
					'EPTA L 5\n'
					'EPTA M -1\n'
					'Stop\n'
				'XDeath:\n'
					'EPTA N 5 \n'
					'EPTA O 5 A_XScream\n'
					'EPTA P 5 A_NoBlocking\n'
					'EPTA QRSTU 5\n'
					'EPTA V -1\n'
					'Stop\n'
				'Raise:\n'
					'EPTA M 5\n'
					'EPTA LKJI 5\n'
					'Goto See \n'
			'}\n'
		'}\n'
		'\n'
		'actor ObligeQuadrumpus : Quadrumpus 310\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeSS : Nazi 311\n'
		'{\n'
		'}\n'
		'\n'
	}
    gui.wad_add_text_lump("BRUMONS", data);
end

function BRUTALDOOM.epic()
  gui.wad_merge_sections("brutaloblige/epic2alien.wad")
end

function BRUTALITY.decorate()

  local data =
	{
		'actor ObligeTrite : Trite 303\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeFlemoid1 : Flemoid1 304\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeFlemoid2 : Flemoid2 305\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeFlemoid3 : Flemoid3 306\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeEasyMarine : EasyMarine 307\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeEpic2Alien : Epic2Alien 309\n'
		'{\n'
			'SeeSound "chainguy/sight"\n'
			'PainSound "chainguy/pain"\n'
			'DeathSound "chainguy/death"\n'
			'ActiveSound "chainguy/active"\n'
			'AttackSound "chainguy/attack"\n'
			'Obituary "%o never saw their attacker"\n'
			'States\n'
			'{\n'
				'See:\n'
					'TNT1 A 0 A_ChangeFlag("SHOOTABLE", 0)\n'
					'TNT1 AAAAAAAAAAAAAAAAAAA 1 A_Chase("","")\n'
					'TNT1 A 0 A_ChangeFlag("SHOOTABLE", 1)\n'
					'EPTA ABCD 1 A_Chase\n'
					'TNT1 A 0 A_ChangeFlag("SHOOTABLE", 0)\n'
					'TNT1 AAAAAAAAAAAAAAAAAAA 1 A_Chase("","")\n'
					'TNT1 A 0 A_ChangeFlag("SHOOTABLE", 1)\n'
					'EPTA ABCD 1 A_Chase\n'
					'EPTA ABCD 1 A_Chase("","")\n'
					'TNT1 AAAAAAAAAAAAAAAAAAA 1 A_Chase("","")\n'
					'EPTA ABCDABCD 1 A_Chase\n'
					'Loop\n'
				'Missile:\n'
					'EPTA E 9 A_FaceTarget\n'
					'EPTA F 4 A_FaceTarget\n'
					'EPTA G 4 BRIGHT A_CPosAttack\n'
					'EPTA E 9 A_FaceTarget\n'
					'EPTA F 4 A_FaceTarget\n'
					'EPTA G 4 BRIGHT A_CPosAttack\n'
					'EPTA E 9 A_FaceTarget\n'
					'EPTA F 4 A_FaceTarget\n'
					'EPTA G 4 BRIGHT A_CPosAttack\n'
					'EPTA E 9 A_FaceTarget\n'
					'EPTA F 4 A_FaceTarget\n'
					'EPTA G 4 BRIGHT A_CPosAttack\n'
					'Goto See\n'
				'Pain:\n'
					'EPTA H 3 A_Pain\n'
					'Goto See\n'
				'Death:\n'
					'EPTA I 5\n'
					'EPTA J 5 A_Scream\n'
					'EPTA K 5 A_NoBlocking\n'
					'EPTA L 5\n'
					'EPTA M -1\n'
					'Stop\n'
				'XDeath:\n'
					'EPTA N 5 \n'
					'EPTA O 5 A_XScream\n'
					'EPTA P 5 A_NoBlocking\n'
					'EPTA QRSTU 5\n'
					'EPTA V -1\n'
					'Stop\n'
				'Raise:\n'
					'EPTA M 5\n'
					'EPTA LKJI 5\n'
					'Goto See \n'
			'}\n'
		'}\n'
		'\n'
		'actor ObligeQuadrumpus : Quadrumpus 310\n'
		'{\n'
		'}\n'
		'\n'
		'actor ObligeSS : Nazi 311\n'
		'{\n'
		'}\n'
		'\n'
		--from pb's decorate.realm667monsters
		'actor ObligeShadow : Shadow 312\n'
		'{\n'
		'}\n'
		'\n'
		--313 is classic wolfenstein (see starterpack)
	}
    gui.wad_add_text_lump("BRUMONS", data);
end

function BRUTALDOOM.gameinfo()

  local data =
	{
	  '//ZDoom GAMEINFO lump for Brutal Oblige\n'
	  'IWAD="Doom2.wad"\n'
	}

  table.insert(data,'LOAD="brutalv20b.pk3","hellonearthstarterpack.wad"\n')
--no harm in loading the starterpack wad if not used and throws no error if not found so load it regardless of if that module's actually being used

  gui.wad_add_text_lump("GAMEINFO", data);
end

function BRUTALITY.gameinfo()

  local data =
	{
	  '//ZDoom GAMEINFO lump for Brutal Oblige\n'
	  'IWAD="Doom2.wad"\n'
	}

  table.insert(data,'LOAD="Project\ Brutality\ 2.03.pk3","hellonearthstarterpack.wad"\n')

  gui.wad_add_text_lump("GAMEINFO", data);
end

function BRUTALDOOM.all_done()
  BRUTALDOOM.decorate();
  BRUTALDOOM.flem_nukage();
  DOOM2.all_done();
  BRUTALDOOM.epic();
  BRUTALDOOM.gameinfo();
end

function BRUTALITY.all_done()
  BRUTALITY.decorate();
  BRUTALDOOM.flem_nukage();
  DOOM2.all_done();
  BRUTALDOOM.epic();
  BRUTALITY.gameinfo();
end

----------------------------------------------------------------
BRUTALDOOM.WEAPONS =
{
	HandGrenade =
	{
	    id=299
	    pref=20
	    --add_prob=20
	    --start_prob=10
	    rate=1
	    damage=70
	    splash={60,45,30,30,20,10}
	    attack="missile"
	    ammo="grenade"
	    per=1
	    rarity=2
	    give={ {ammo="grenade",count=1} }
	}
	GrenadeLauncher =
	{
	    id=298
	    level = 3
    	    pref = 30
    	    add_prob = 25
	    --start_prob=10
	    rate=1
	    damage=100
	    splash={60,45,30,30,20,10}
	    attack="missile"
	    ammo="grenade"
	    per=1
	    rarity=2
	    give={ {ammo="grenade",count=6} }
	}
	railgun =
	{
	    id=297
	    level = 5
    	    pref = 30
    	    add_prob = 15
	    --start_prob=10
	    rate=1
	    damage=1000
	    attack="missile"
	    ammo="cell"
	    per=1
	    rarity=2
	    give={ {ammo="cell",count=1} }
	}
	  bfg10k =
	  {
	    id = 296
	    level = 8
	    pref = 15
	    add_prob = 20
	    mp_prob = 6
	    attack = "missile"
	    rate = 0.65  -- tweaked value, normally 0.8
	    damage = 300
	    splash = {70,70,70,70, 70,70,70,70, 70,70,70,70}
	    ammo = "cell"
	    per = 40
	    give = { {ammo="cell",count=40} }
	    bonus_ammo = 40
	  }
}

--BRUTALITY.WEAPONS =
--{
--	HandGrenade = REMOVE_ME
--	GrenadeLauncher = REMOVE_ME
--	railgun = REMOVE_ME
--	bfg10k = REMOVE_ME
--}

BRUTALDOOM.NICE_ITEMS =
{
  goggles = REMOVE_ME --seem to be broken in v20b and were never that useful in oblige maps anyway
}

BRUTALDOOM.PICKUPS =
{
  -- AMMO --

  grenade =
  {
    id = 300
    kind = "ammo"
    add_prob = 1
    give = { {ammo="grenade",count=5} } --actually it only gives 1 but this was the only way to stop Oblige flooding maps with them
  }

  grenade_box =
  {
    id = 301
    kind = "ammo"
    rank = 5
    --add_prob = 10 --left out because it looks like a regular grenade and makes the player a bit overpowered
    give = { {ammo="grenade",count=10} }
  }

}

--BRUTALITY.PICKUPS =
--{
--  grenade = REMOVE_ME
--  grenade_box = REMOVE_ME
--}

BRUTALDOOM.PLAYER_MODEL =
{
    doomer =
    {
        stats   = { health=0, bullet=0, shell=0, rocket=0, cell=0 }
        weapons = { fist=1, pistol=1, HandGrenade=1 }
    }
}

function BRUTALDOOM.setup()

local data =
	{
		'//Brutal Doom additions\n'
		'#include "BRUMONS" \n'
		'//weapons\n\n'
		'actor HandGrenadesOblige : HandGrenades 299\n'
		'{\n'
		'}\n'
		'\n'
		'actor GrenadeAmmoOblige : GrenadeAmmo 300\n'
		'{\n'
		'}\n'
		'\n'
		'actor GrenadeBoxOblige : GrenadeBox 301\n'
		'{\n'
		'}\n'
		'\n'
		'actor GrenadeLauncherOblige : GrenadeLauncher 298\n'
		'{\n'
		'Weapon.AmmoType1 "GrenadeAmmo"\n'
		'Weapon.AmmoType2 "GrenadeAmmo"\n'
		'Inventory.PickupMessage "You got the grenade launcher!"\n'
		'Weapon.SlotNumber 5\n'
		'}\n'
		'\n'
		'actor RailGunOblige : RailGun 297\n'
		'{\n'
		'Weapon.SlotNumber 6\n'
		'}\n'
		'\n'
		'actor BFG10KOblige : BFG10K 296\n'
		'{\n'
		'}\n'
		'\n'
	}
    gui.wad_add_text_lump("DECORATE", data);

local confdata =
	{
	'setslot 1 Chain_Saw ClassicModernSaw Melee_Attacks ClassicFist ClassicSaw\n'
	'setslot 2 DualRifles Rifle  BrutalPistol ClassicPistol MP40\n'
	'setslot 3 Shot_Gun SSG ClassicShotgun ClassicSSG\n'
	'setslot 4 MiniGun ClassicChaingun HitlersBuzzsaw\n'
	'setslot 5 GrenadeLauncher Rocket_Launcher ClassicRocketLauncher GrenadeLauncherOblige\n'
	'setslot 6 RailGun DualPlasmaRifles Plasma_Gun ClassicPlasmaRifle RailGunOblige\n'
	'setslot 7 BFG10k BIG_FUCKING_GUN VanillaBFG9000 BFG10KOblige\n'
	'setslot 8 HellishMissileLauncher\n'
	'setslot 9 FlameCannon\n'
	'setslot 0 HandGrenades HandGrenadesOblige\n'

	}
    gui.wad_add_text_lump("KEYCONF", confdata);
end

function BRUTALITY.setup()

local data =
	{
		'//Brutality additions\n'
		'#include "BRUMONS" \n'
		'//weapons\n\n'
		'actor NilHandGrenadesOblige : PistolAmmo 299\n'
		'{\n'
		'}\n'
		'\n'
		'actor GrenadeAmmoOblige : LauncherAmmoSpawner 300\n'
		'{\n'
		'}\n'
		'\n'
		'actor NilGrenadeBoxOblige : PistolAmmo 301\n'
		'{\n'
		'}\n'
		'\n'
		'actor GrenadeLauncherOblige : LauncherWeaponSpawner 298\n'
		'{\n'
		'}\n'
		'\n'
		'actor RailGunOblige : PlasmaWeaponSpawner 297\n'
		'{\n'
		'}\n'
		'\n'
		'actor BFG10KOblige : BFGWeaponSpawner 296\n'
		'{\n'
		'}\n'
		'\n'
	}
      gui.wad_add_text_lump("DECORATE", data);
end
-------------------Themes---------------------------
BRUTALDOOM.ENTITIES =
{
  --- KEYS ---

  kc_red     = { id=13 }
  kc_yellow  = { id=6  }
  kc_blue    = { id=5  }
}
BRUTALDOOM.LIQUIDS =
{
  flem1 = { mat="SNOT1", light=172, special=5,  damage=10 }
  flem2 = { mat="SNOT4", light=172, special=5,  damage=10 }
}

BRUTALDOOM.MATERIALS =
{
  CHEXROCK  = { t="CHEXROCK",    f="CHEXFLRK" }
  CHEXROCK2  = { t="CHEXROCK2",    f="CHEXODF2" }

  CHEXINDOOR1 = { t="CHEXWALL",    f="CHEXFLOR" }
  CHEXINDOOR2 = { t="CHEXWAL2",    f="CHEXFLR2" }
  CHEXINDOOR3 = { t="CHEXWAL3",    f="CHEXFLR3" }

  CHEXOUTDOOR1   = { t="CHEXODW",   f="CHEXODF" }
  CHEXOUTDOOR2   = { t="CHEXODW2",   f="CHEXODF2" }
  CHEXOUTDOOR3   = { t="CHEXODW3",   f="RROCK10" }
  CHEXOUTDOOR4   = { t="CHEXODW4",   f="FLAT5_5" }
  CHEXOUTDOOR5   = { t="CHEXODW5",   f="FLOOR5_4" }

  --Door
  CHEXDOOR1 = { t="CHEXDOR", f="FLAT23" }

  -- liquid stuff (using new patches)
  SFALL1   = { t="SNTFL1", f="SNOT1", sane=1 }
  SNOT1  = { t="SNTFL1", f="SNOT1", sane=1 }
  SFALL2   = { t="SNTFL1", f="SNOT4", sane=1 }
  SNOT4  = { t="SNTFL1", f="SNOT4", sane=1 }
}

BRUTALDOOM.THEMES =
{
satanshankerchief_DEFAULTS = 
  {
    liquids =
    {
      flem1   = 100
      flem2   = 100
    }

    keys =
    {
      ks_red  = 50
      ks_blue = 50
      ks_yellow = 50
    }

    facades =
    {
      CHEXOUTDOOR1 = 50
      CHEXOUTDOOR2 = 50
      CHEXOUTDOOR3 = 50
      CHEXOUTDOOR4 = 50
      CHEXOUTDOOR5 = 50
    }

    base_skin =
    {
	big_door = "CHEXDOOR1"
    }

    monster_prefs =
    {
      Flemoid1 = 2.0
      Flemoid2 = 2.0
      Flemoid3 = 1.5
    }

    archy_arches = true
    techy_doors = true
  }

  satanshankerchief_Indoors =
  {
    prob = 50
    kind = "building"

    walls =
    {
      CHEXINDOOR1 = 100
      CHEXINDOOR2 = 100
      CHEXINDOOR3 = 100
    }

    floors =
    {
      CHEXINDOOR1 = 100
      CHEXINDOOR2 = 100
      CHEXINDOOR3 = 100
    }

    ceilings =
    {
      CHEXINDOOR1 = 100
      CHEXINDOOR3 = 100
    }
  }


  satanshankerchief_Cave =
  {
    kind = "cave"

    naturals =
    {
      CHEXROCK = 100
      CHEXROCK2 = 50
    }
  }


  satanshankerchief_Outdoors =
  {
    kind = "outdoors"

    floors =
    {
      CHEXOUTDOOR1 = 50
      CHEXOUTDOOR2 = 20
      CHEXOUTDOOR3 = 20
      CHEXOUTDOOR4 = 20
      CHEXOUTDOOR5 = 40
      FLOOR4_8 = 10
      FLOOR5_4 = 20
      FLOOR5_4 = 20
    }

    naturals =
    {
      CHEXOUTDOOR1 = 50
      CHEXOUTDOOR2 = 20
      CHEXOUTDOOR3 = 20
      CHEXOUTDOOR4 = 20
      CHEXOUTDOOR5 = 40
    }
  }


  satanshankerchief_Hallway =
  {
    kind = "hallway"

    walls =
    {
      CHEXINDOOR1 = 90
      CHEXINDOOR2 = 90
      CHEXINDOOR3 = 90
      GRAY1    = 70

      TEKWALL6 = 30
      TEKWALL4 = 10
      TEKGREN1 = 40
      STARGR1 = 10
      STARBR2 = 10

      BROWNPIP = 20
      PIPEWAL2 = 40
      PIPE2 = 15
      PIPE4 = 15
    }

    floors =
    {
      CHEXINDOOR1  = 50
      CHEXINDOOR2 = 50
      FLAT1  = 20
      FLOOR4_8 = 15
      FLOOR0_2 = 20
      CEIL4_1 = 20
    }

    ceilings =
    {
      CHEXINDOOR1 = 50
      CEIL3_1 = 50
      RROCK03 = 50
      CEIL4_2 = 20
      CEIL5_1 = 40
    }
  }

  wolf_DEFAULTS =
  {
    prob = 10

    square_caves = 1

    facades =
    {
      ZZWOLF1  = 50
      ZZWOLF9  = 50
      ZZWOLF11 = 20
      ZZWOLF5  = 5
    }

    monster_prefs =
    {
      --Rottweiler   = 30  -- dog from extrathemes module
      demon     =  30
      imp     =  5  -- kinda like a mutant
      BrutalSS = 100
    }

    base_skin =
    {
      big_door = "ZELDOOR"
    }

    style_list =
    {
      caves = { none=40, few=60, some=10 }
    }
  }

}

function BRUTALDOOM.flem_nukage()
	gui.wad_merge_sections("brutaloblige/flem.wad")
	local flemdata =
	{
	'flat SNOT1\n'
		'pic SNOT1 tics 5\n'
		'pic SNOT2 tics 5\n'
		'pic SNOT3 tics 5\n'
	'flat SNOT4\n'
		'pic SNOT4 tics 4\n'
		'pic SNOT5 tics 4\n'
		'pic SNOT6 tics 4\n'
		'pic SNOT7 tics 4\n'
	'texture SNTFL1\n'
		'pic SNTFL1 tics 4\n'
		'pic SNTFL2 tics 4\n'
		'pic SNTFL3 tics 4\n'
	'// CQ3 Animated Sky\n'
	'texture CHEXSKY3\n'
		'pic CJSKY3A tics 3\n'
		'pic CJSKY3B tics 3\n'
		'pic CJSKY3C tics 3\n'
		'pic CJSKY3D tics 3\n'
		'pic CJSKY3E tics 3\n'
		'pic CJSKY3F tics 3\n'
		'pic CJSKY3G tics 3\n'
		'pic CJSKY3H tics 3\n'
	}
gui.wad_add_text_lump("ANIMDEFS", flemdata);
	flemdata =
	{
		'splash 	Flem\n'
		'{\n'
		 'smallclass 	nukageSplashBase\n'
		 'smallclip		6\n'
		 'baseclass		nukageSplashBase\n'
		 'chunkclass	    sludgechunk\n'
		 'chunkxvelshift	8\n'
		 'chunkyvelshift	8\n'
		 'chunkzvelshift	6\n'
		 'chunkbasezvel	2\n'
		 'sound		world/lavasizzle\n'
		 'NoAlert\n'
		'}\n'
		'\n'
		'terrain	 Flem\n'
		'{\n'
		 'splash 	Flem\n'
		 'footclip	 6\n'
		 'liquid\n'
		'}\n'
		'\n'
		'floor SNOT1 Flem\n'
		'floor SNOT2 Flem\n'
		'floor SNOT3 Flem\n'
		'floor SNOT4 Flem\n'
		'floor SNOT5 Flem\n'
		'floor SNOT6 Flem\n'
		'floor SNOT7 Flem\n'
	}
gui.wad_add_text_lump("TERRAIN", flemdata);
end

OB_THEMES["satanshankerchief"] =
{
  label = "Satan's Hankerchief"
  priority = 2
  name_class = "TECH"
  game = "brutaldoom"
  mixed_prob = 5
}

OB_GAMES["brutaldoom"] =
{
  label = "Brutal Doom"

  extends = "doom2"

  format = "doom"

  engine = { boom=0, gzdoom=1, zandronum=1 }

  tables =
  {
    BRUTALDOOM
  }

  hooks =
  {
    setup       = BRUTALDOOM.setup
    all_done	= BRUTALDOOM.all_done
  }
}

OB_GAMES["brutality"] =
{
  label = "Project Brutality"

  extends = "brutaldoom"

  format = "doom"

  tables =
  {
    BRUTALITY
  }

  hooks =
  {
    setup = BRUTALITY.setup
    all_done = BRUTALITY.all_done
  }
}

OB_MODULES["brutaldoom"] =
{
  label = "Brutal Doom"

  game = { doom1=1, doom2=1 }

  engine = { boom=0 } --hides it from the list (as ticking it or not makes no difference). A bit of a hack but it works.
}


